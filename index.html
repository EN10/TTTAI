<!DOCTYPE html>
<html>
<body>
<h1>Tic Tac Toe</h1>
<canvas id="draw" width="300" height="300" onmousedown="ClickXY(event)"></canvas>
<script>
var xhr=new XMLHttpRequest();                   // Load Games.txt
xhr.onreadystatechange=function() { 
if (xhr.readyState==4 && xhr.status==200)
{ console.log(xhr.responseText); }
}
xhr.open("GET","games.txt",true);
xhr.send();

var g = document.getElementById("draw").getContext("2d");
g.fillRect(0,0,100,100);                        // Draw Grid
g.fillRect(200,0,100,100);
g.fillRect(100,100,100,100);
g.fillRect(0,200,100,100);
g.fillRect(200,200,100,100);

function ClickXY(event) {                       // Mouse ClickXY
g.fillStyle="red";
g.font="80px Arial";
g.fillText("O",event.clientX-35,event.clientY-55);
XYtoSQ(event.clientX,event.clientY);
}

var w=100; var h=100; var sq; var game;
function  XYtoSQ(x,y) {    
     if     (x < 10)        { sq=0; }           // Canvas starts 10 pixels on x
else if     (x < 10+w)      { sq=1; }
else if     (x < 10+2*w)    { sq=2; }
else if     (x < 10+3*w)    { sq=3; }
else                        { sq=0; }
if          (y < 60)        { sq=0; }           // Canvas starts 60 pixels on y
else if     (y < 60+h)      {       }
else if     (y < 60+2*h)    { sq+=3;}
else if     (y < 60+3*h)    { sq+=6;}
else                        { sq= 0;}
game+="O"+sq;  console.log(sq); output();
}

function output() {                             // Draw X
var i=w/3; var j=h*2/3;                         // Offset Sq Center
var r = Math.floor(Math.random()*8)+1;
if (r == 1) g.fillText("X",i,j);
if (r == 2) g.fillText("X",i+w,j);
if (r == 3) g.fillText("X",i+2*w,j);
if (r == 4) g.fillText("X",i,j+h);
if (r == 5) g.fillText("X",i+w,j+h);
if (r == 6) g.fillText("X",i+2*w,j+h);
if (r == 7) g.fillText("X",i,j+2*h);
if (r == 8) g.fillText("X",i+w,j+2*h);
if (r == 9) g.fillText("X",i+2*w,j+2*h);
}
</script>
<p>By Enio Fernandes</p>
</body>
</html>